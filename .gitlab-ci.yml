image: node:20-alpine

stages:
  - install
  - validate
  - test

cache:
  key:
    files:
      - package-lock.json
  paths:
    - node_modules/

install:
  stage: install
  script:
    - npm ci

lint:
  stage: validate
  script:
    - npm run lint

typecheck:
  stage: validate
  script:
    - npx tsc --noEmit

test:
  stage: test
  script:
    - npm run test